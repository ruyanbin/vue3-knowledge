{"ast":null,"code":"function clearScene(scene) {\n  scene.traverse(child => {\n    clearGroup(child);\n  });\n}\nfunction clearGroup(group) {\n  const clearCache = mesh => {\n    if (mesh.geometry) {\n      mesh.geometry.dispose();\n    }\n    if (mesh.material && mesh.material.dispose) {\n      mesh.material.dispose();\n    }\n    if (mesh.material.texture && mesh.material.texture.dispose) {\n      mesh.material.texture.dispose();\n    }\n  };\n  const removeObj = item => {\n    let array = item.children.filter(x => x);\n    array.forEach(v => {\n      if (v.children.length) {\n        removeObj(v);\n      } else {\n        if (v.isMesh) {\n          clearCache(v);\n        }\n      }\n    });\n    array = null;\n  };\n  removeObj(group);\n}\nexport { clearGroup, clearScene };","map":{"version":3,"mappings":"AAAO,oBAAoBA,KAAO;EAChCA,MAAMC,SAAkBC;IACXC;EAAA;AAAA;AAIR,oBAAoBC,KAAO;EAC1B,mBAAcC,IAAS;IAC3B,IAAIA,KAAKC,QAAU;MACjBD,KAAKC,QAAS;IAAA;IAEhB,IAAID,IAAK,aAAYA,IAAK,UAASE,OAAS;MAC1CF,KAAKG,QAAS;IAAA;IAEhB,IAAIH,KAAKG,QAAS,YAAWH,IAAK,UAASI,QAAQF,OAAS;MAC1DF,KAAKG,SAASC,OAAQ;IAAA;EAAA;EAGpB,kBAAaC,IAAS;IAC1B,IAAIC,KAAQ,QAAKC,QAAS,QAAQC,CAAM;IACxCF,MAAMG,QAAaC;MACb,MAAEH,SAASI,MAAQ;QACXC;MAAA,CACL;QACL,IAAIF,EAAEG,MAAQ;UACDC;QAAA;MAAA;IAAA;IAITR;EAAA;EAEAM;AAAA","names":["scene","traverse","child","clearGroup","group","mesh","geometry","dispose","material","texture","item","array","children","x","forEach","v","length","removeObj","isMesh","clearCache"],"sources":["../../../../src/utils/threeUtil.js"],"sourcesContent":["export function clearScene(scene) {\r\n  scene.traverse(child => {\r\n    clearGroup(child);\r\n  });\r\n}\r\n\r\nexport function clearGroup(group) {\r\n  const clearCache = (mesh) => {\r\n    if (mesh.geometry) {\r\n      mesh.geometry.dispose(); // 删除几何体\r\n    }\r\n    if (mesh.material && mesh.material.dispose) {\r\n      mesh.material.dispose(); // 删除材质\r\n    }\r\n    if (mesh.material.texture && mesh.material.texture.dispose) {\r\n      mesh.material.texture.dispose();\r\n    }\r\n  };\r\n  const removeObj = (item) => {\r\n    let array = item.children.filter((x) => x);\r\n    array.forEach(v => {\r\n      if (v.children.length) {\r\n        removeObj(v);\r\n      } else {\r\n        if (v.isMesh) {\r\n          clearCache(v);\r\n        }\r\n      }\r\n    });\r\n    array = null;\r\n  };\r\n  removeObj(group);\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}