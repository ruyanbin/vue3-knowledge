{"ast":null,"code":"import { PointLight, Color } from 'three';\nclass ThreeLightPoint {\n  constructor(layer, options) {\n    this.layer = layer;\n    const light = new PointLight(this.getColorHex(options.color), options.intensity, options.distance, options.decay);\n    this.object = light;\n    this.setPosition(options.position);\n    layer.add(light);\n  }\n  setColor(color) {\n    this.object.color = new Color(color);\n    this.refresh();\n  }\n  getColorHex(color) {\n    return new Color(color).getHex();\n  }\n  setIntensity(intensity) {\n    this.object.intensity = intensity;\n    this.refresh();\n  }\n  setPosition(position) {\n    var _a;\n    const positionConvert = (_a = this.layer) == null ? void 0 : _a.convertLngLat([position.x, position.y]);\n    this.object.position.set(positionConvert[0], positionConvert[1], position.z);\n    this.refresh();\n  }\n  refresh() {\n    var _a;\n    (_a = this.layer) == null ? void 0 : _a.update();\n  }\n  remove() {\n    var _a;\n    if (this.object) {\n      (_a = this.layer) == null ? void 0 : _a.remove(this.object);\n    }\n  }\n  destroy() {\n    if (this.object) {\n      this.object = null;\n      this.layer = null;\n    }\n  }\n}\nexport { ThreeLightPoint as default };","map":{"version":3,"mappings":";AAYA,MAAsBA;EAIpBC,YAAYC,OAAyBC,OAAkB;IACrD,KAAKD,KAAQ;IACP,cAAQ,IAAIE,WAAW,IAAK,aAAYD,OAAQ,SAAQA,OAAQ,YAAWA,OAAQ,WAAUA,OAAQ;IAC3G,KAAKE,MAAS;IACd,KAAKC,YAAYH,OAAQ;IACzBD,MAAMK,GAAI;EAAA;EAGZC,SAASC,KAAe;IACjB,YAAQA,KAAQ,OAAIC,KAAM;IAC1B;EAAA;EAGPC,YAAYF,KAAc;IACjB,WAAIC,MAAMD,KAAO;EAAA;EAG1BG,aAAaC,SAAmB;IAC9B,KAAKR,OAAQQ,SAAY;IACpB;EAAA;EAGPP,YAAYQ,QAAc;IAtC5B;IAuCU,wBAAkB,WAAKZ,KAAL,wBAAYa,cAAc,CAACD,SAASE,GAAGF,QAAS;IACxE,KAAKT,OAAQS,QAAS,KAAIG,gBAAgB,CAAI,mBAAgB,IAAIH,QAAS;IACtE;EAAA;EAGPI,OAAU;IA5CZ;IA6CI,WAAKhB,UAAL,IAAY;EAAA;EAGdiB,MAAQ;IAhDV;IAiDI,IAAI,KAAKd,MAAQ;MACV,qBAAL,IAAY,sBAAO,IAAK;IAAA;EAAA;EAI5Be,OAAU;IACR,IAAI,KAAKf,MAAQ;MACf,KAAKA,MAAS;MACd,KAAKH,KAAQ;IAAA;EAAA;AAAA","names":["ThreeLightPoint","constructor","layer","options","PointLight","object","setPosition","add","setColor","color","Color","getColorHex","setIntensity","intensity","position","convertLngLat","x","positionConvert","refresh","remove","destroy"],"sources":["../../../../../../src/packages/three/ThreeLightPoint/ThreeLightPoint.ts"],"sourcesContent":["import {PointLight, Color} from 'three';\r\nimport type {Vec} from './Type';\r\nimport type CustomThreeLayer from '@vue-map/packages/three/ThreeLayer/CustomThreeLayer'\r\n\r\ninterface Options {\r\n  color: string // 颜色的rgb数值。缺省值为 0xffffff。\r\n  intensity: number  // 光照的强度。缺省值为 1。\r\n  distance: number // 这个距离表示从光源到光照强度为0的位置。 当设置为0时，光永远不会消失(距离无穷大)\r\n  decay: number // 沿着光照距离的衰退量。缺省值 1\r\n  position: Vec // 点位置\r\n}\r\n\r\nclass ThreeLightPoint {\r\n  object: PointLight | null // Light\r\n  layer: CustomThreeLayer | null // threejs的图层对象\r\n\r\n  constructor(layer: CustomThreeLayer, options: Options) {\r\n    this.layer = layer;\r\n    const light = new PointLight(this.getColorHex(options.color), options.intensity, options.distance, options.decay);\r\n    this.object = light;\r\n    this.setPosition(options.position);\r\n    layer.add(light);\r\n  }\r\n\r\n  setColor(color: string) {\r\n    this.object!.color = new Color(color);\r\n    this.refresh();\r\n  }\r\n\r\n  getColorHex(color: string){\r\n    return new Color(color).getHex();\r\n  }\r\n\r\n  setIntensity(intensity: number) {\r\n    this.object!.intensity = intensity;\r\n    this.refresh();\r\n  }\r\n\r\n  setPosition(position: Vec){\r\n    const positionConvert = this.layer?.convertLngLat([position.x, position.y]);\r\n    this.object!.position.set(positionConvert[0], positionConvert[1], position.z);\r\n    this.refresh();\r\n  }\r\n\r\n  refresh() {\r\n    this.layer?.update();\r\n  }\r\n\r\n  remove(){\r\n    if (this.object) {\r\n      this.layer?.remove(this.object)\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    if (this.object) {\r\n      this.object = null;\r\n      this.layer = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ThreeLightPoint\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}