{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7bf517c8\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main\"\n};\nconst _hoisted_2 = {\n  class: \"form\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"list\",\n  id: \"list\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"map\",\n  id: \"gd_map_d\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\"搜索框\"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.address = $event),\n    id: \"tipinput\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => _ctx.select && _ctx.select(...args), [\"enter\"]))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, _ctx.address]])]), _createCommentVNode(\"查询列表,高德地图api绑定id\"), _hoisted_3, _createCommentVNode(\"地图,需要设置宽高\"), _hoisted_4]);\n}","map":{"version":3,"mappings":";;;EACMA,KAAK,EAAC;AAAM;;EACXA,KAAK,EAAC;AAAM;gEAKjBC,oBAAkC;EAA7BD,KAAK,EAAC,MAAM;EAACE,EAAE,EAAC;;gEAErBD,oBAAqC;EAAhCD,KAAK,EAAC,KAAK;EAACE,EAAE,EAAC;;;;uBARrBC,oBASM,OATNC,UASM,GARLH,oBAGM,OAHNI,UAGM,GAFLC,0BAAU,kBACVL,oBAAyF;IAAlFM,IAAI,EAAC,MAAM;IAACP,KAAK,EAAC,OAAO;+DAAUQ,YAAO;IAAEN,EAAE,EAAC,UAAU;IAAEO,OAAK,mDAAQD,mCAAM;iEAA3CA,YAAO,OAElDF,uCAAuB,EACvBI,UAAkC,EAClCJ,gCAAgB,EAChBK,UAAqC","names":["class","_createElementVNode","id","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","type","_ctx","onKeyup","_hoisted_3","_hoisted_4"],"sourceRoot":"","sources":["/Users/yanbinru/Desktop/代码/github/vue3-knowledge/src/views/map/gaud/components/search.vue"],"sourcesContent":["<template>\n\t<div class=\"main\">\n\t\t<div class=\"form\">\n\t\t\t<!--搜索框-->\n\t\t\t<input type=\"text\" class=\"input\" v-model=\"address\" id=\"tipinput\" @keyup.enter=\"select\" />\n\t\t</div>\n\t\t<!--查询列表,高德地图api绑定id-->\n\t\t<div class=\"list\" id=\"list\"></div>\n\t\t<!--地图,需要设置宽高-->\n\t\t<div class=\"map\" id=\"gd_map_d\"></div>\n\t</div>\n</template>\n\n<script setup>\nimport AMapLoader from '@amap/amap-jsapi-loader';\n//data\nconst { proxy } = getCurrentInstance();\nconst address = ref('');\nlet geocoder = null;\nlet MyMap = null;\nlet map = null;\nconst placeSearch: any = ref();\n//methods\nconst select = () => {\n\t//构造地点查询类\n\tplaceSearch = new MyMap.PlaceSearch({\n\t\tpageSize: 3, // 单页显示结果条数\n\t\tpageIndex: 1, // 页码\n\t\tcity: '010', // 兴趣点城市\n\t\tcitylimit: false, //是否强制限制在设置的城市内搜索\n\t\tmap: map, // 展现结果的地图实例\n\t\tpanel: 'list', // 结果列表将在此容器中进行展示。\n\t\tautoFitView: false, // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围\n\t});\n\t//关键字查询\n\tplaceSearch.search(proxy.address);\n};\nconst getAddress = () => {\n\tlet cc = map.getCenter();\n\treturn new Promise((resolve, reject) => {\n\t\tgeocoder.getAddress([cc.lng, cc.lat], (status, result) => {\n\t\t\tif (result.regeocode.formattedAddress) {\n\t\t\t\tresolve(result.regeocode.formattedAddress);\n\t\t\t} else {\n\t\t\t\tresolve('');\n\t\t\t}\n\t\t});\n\t});\n};\n//mapinit\nwindow._AMapSecurityConfig = {\n\tsecurityJsCode: '填写高德地图Web端(JS API)申请的密钥',\n};\nAMapLoader.load({\n\tkey: '填写高德地图Web端(JS API)申请的key', // 申请好的Web端开发者Key\n\tversion: '2.0', // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n\tplugins: ['AMap.AutoComplete', 'AMap.PlaceSearch', 'AMap.Geocoder'], // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n})\n\t.then((AMap) => {\n\t\tMyMap = AMap; //保存AMap\n\n\t\tinit();\n\t})\n\t.catch((e) => {\n\t\tconsole.log(e);\n\t});\nconst init = () => {\n\t//绘制MyMap实例地图\n\tmap = new MyMap.Map('gd_map_d', {\n\t\tzoom: 14, //初始地图级别\n\t\tcenter: [121.473432, 31.22919],\n\t\tresizeEnable: true,\n\t});\n\tgeocoder = new MyMap.Geocoder({\n\t\tcity: '010', //城市设为北京，默认：“全国”\n\t});\n\tvar auto = new MyMap.AutoComplete({\n\t\tinput: 'tipinput',\n\t});\n};\ndefineExpose({\n\tgetAddress, //将事件暴露出去\n});\n</script>\n<style scoped lang=\"scss\">\n.main {\n\twidth: 100%;\n\theight: 350px;\n\tposition: relative;\n\n\t.map {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.form {\n\t\tposition: absolute;\n\t\tleft: 10px;\n\t\ttop: 10px;\n\t\tz-index: 999;\n\n\t\t.input {\n\t\t\twidth: 180px;\n\t\t\tline-height: 30px;\n\t\t\tpadding-left: 5px;\n\t\t\tbox-shadow: 0 2px 6px 0 rgb(114 124 245 / 50%);\n\t\t\toutline: none;\n\t\t\tborder-radius: 5px;\n\t\t\tborder: none;\n\t\t}\n\t}\n\n\t.list {\n\t\tposition: absolute;\n\t\ttop: 10px;\n\t\tright: 10px;\n\t\theight: 300px;\n\t\twidth: 240px;\n\t\tz-index: 999;\n\n\t\t.li {\n\t\t\tline-height: 25px;\n\t\t}\n\t}\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}