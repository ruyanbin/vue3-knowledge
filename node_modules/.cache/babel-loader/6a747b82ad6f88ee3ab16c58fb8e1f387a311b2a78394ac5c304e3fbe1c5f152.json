{"ast":null,"code":"// src/normalize.ts\nfunction isObject(v) {\n  return typeof v === \"object\" && v !== null;\n}\nfunction normalizeOptions(options, factoryOptions) {\n  options = isObject(options) ? options : /* @__PURE__ */Object.create(null);\n  return new Proxy(options, {\n    get(target, key, receiver) {\n      if (key === \"key\") return Reflect.get(target, key, receiver);\n      return Reflect.get(target, key, receiver) || Reflect.get(factoryOptions, key, receiver);\n    }\n  });\n}\n\n// src/pick.ts\nfunction get(state, path) {\n  return path.reduce((obj, p) => {\n    return obj == null ? void 0 : obj[p];\n  }, state);\n}\nfunction set(state, path, val) {\n  return path.slice(0, -1).reduce((obj, p) => {\n    if (/^(__proto__)$/.test(p)) return {};else return obj[p] = obj[p] || {};\n  }, state)[path[path.length - 1]] = val, state;\n}\nfunction pick(baseState, paths) {\n  return paths.reduce((substate, path) => {\n    const pathArray = path.split(\".\");\n    return set(substate, pathArray, get(baseState, pathArray));\n  }, {});\n}\n\n// src/plugin.ts\nfunction hydrateStore(store, {\n  storage,\n  serializer,\n  key,\n  debug\n}) {\n  try {\n    const fromStorage = storage == null ? void 0 : storage.getItem(key);\n    if (fromStorage) store.$patch(serializer == null ? void 0 : serializer.deserialize(fromStorage));\n  } catch (error) {\n    if (debug) console.error(error);\n  }\n}\nfunction persistState(state, {\n  storage,\n  serializer,\n  key,\n  paths,\n  debug\n}) {\n  try {\n    const toStore = Array.isArray(paths) ? pick(state, paths) : state;\n    storage.setItem(key, serializer.serialize(toStore));\n  } catch (error) {\n    if (debug) console.error(error);\n  }\n}\nfunction createPersistedState(factoryOptions = {}) {\n  return context => {\n    const {\n      options: {\n        persist\n      },\n      store\n    } = context;\n    if (!persist) return;\n    const persistences = (Array.isArray(persist) ? persist.map(p => normalizeOptions(p, factoryOptions)) : [normalizeOptions(persist, factoryOptions)]).map(({\n      storage = localStorage,\n      beforeRestore = null,\n      afterRestore = null,\n      serializer = {\n        serialize: JSON.stringify,\n        deserialize: JSON.parse\n      },\n      key = store.$id,\n      paths = null,\n      debug = false\n    }) => {\n      var _a;\n      return {\n        storage,\n        beforeRestore,\n        afterRestore,\n        serializer,\n        key: ((_a = factoryOptions.key) != null ? _a : k => k)(key),\n        paths,\n        debug\n      };\n    });\n    store.$persist = () => {\n      persistences.forEach(persistence => {\n        persistState(store.$state, persistence);\n      });\n    };\n    store.$hydrate = ({\n      runHooks = true\n    } = {}) => {\n      persistences.forEach(persistence => {\n        const {\n          beforeRestore,\n          afterRestore\n        } = persistence;\n        if (runHooks) beforeRestore == null ? void 0 : beforeRestore(context);\n        hydrateStore(store, persistence);\n        if (runHooks) afterRestore == null ? void 0 : afterRestore(context);\n      });\n    };\n    persistences.forEach(persistence => {\n      const {\n        beforeRestore,\n        afterRestore\n      } = persistence;\n      beforeRestore == null ? void 0 : beforeRestore(context);\n      hydrateStore(store, persistence);\n      afterRestore == null ? void 0 : afterRestore(context);\n      store.$subscribe((_mutation, state) => {\n        persistState(state, persistence);\n      }, {\n        detached: true\n      });\n    });\n  };\n}\n\n// src/index.ts\nvar src_default = createPersistedState();\nexport { createPersistedState, src_default as default };","map":{"version":3,"names":["isObject","v","normalizeOptions","options","factoryOptions","Object","create","Proxy","get","target","key","receiver","Reflect","state","path","reduce","obj","p","set","val","slice","test","length","pick","baseState","paths","substate","pathArray","split","hydrateStore","store","storage","serializer","debug","fromStorage","getItem","$patch","deserialize","error","console","persistState","toStore","Array","isArray","setItem","serialize","createPersistedState","context","persist","persistences","map","localStorage","beforeRestore","afterRestore","JSON","stringify","parse","$id","_a","k","$persist","forEach","persistence","$state","$hydrate","runHooks","$subscribe","_mutation","detached","src_default","default"],"sources":["/Users/yanbinru/Desktop/代码/github/vue3-knowledge/node_modules/pinia-plugin-persistedstate/dist/index.mjs"],"sourcesContent":["// src/normalize.ts\nfunction isObject(v) {\n  return typeof v === \"object\" && v !== null;\n}\nfunction normalizeOptions(options, factoryOptions) {\n  options = isObject(options) ? options : /* @__PURE__ */ Object.create(null);\n  return new Proxy(options, {\n    get(target, key, receiver) {\n      if (key === \"key\")\n        return Reflect.get(target, key, receiver);\n      return Reflect.get(target, key, receiver) || Reflect.get(factoryOptions, key, receiver);\n    }\n  });\n}\n\n// src/pick.ts\nfunction get(state, path) {\n  return path.reduce((obj, p) => {\n    return obj == null ? void 0 : obj[p];\n  }, state);\n}\nfunction set(state, path, val) {\n  return path.slice(0, -1).reduce((obj, p) => {\n    if (/^(__proto__)$/.test(p))\n      return {};\n    else\n      return obj[p] = obj[p] || {};\n  }, state)[path[path.length - 1]] = val, state;\n}\nfunction pick(baseState, paths) {\n  return paths.reduce((substate, path) => {\n    const pathArray = path.split(\".\");\n    return set(substate, pathArray, get(baseState, pathArray));\n  }, {});\n}\n\n// src/plugin.ts\nfunction hydrateStore(store, { storage, serializer, key, debug }) {\n  try {\n    const fromStorage = storage == null ? void 0 : storage.getItem(key);\n    if (fromStorage)\n      store.$patch(serializer == null ? void 0 : serializer.deserialize(fromStorage));\n  } catch (error) {\n    if (debug)\n      console.error(error);\n  }\n}\nfunction persistState(state, { storage, serializer, key, paths, debug }) {\n  try {\n    const toStore = Array.isArray(paths) ? pick(state, paths) : state;\n    storage.setItem(key, serializer.serialize(toStore));\n  } catch (error) {\n    if (debug)\n      console.error(error);\n  }\n}\nfunction createPersistedState(factoryOptions = {}) {\n  return (context) => {\n    const {\n      options: { persist },\n      store\n    } = context;\n    if (!persist)\n      return;\n    const persistences = (Array.isArray(persist) ? persist.map((p) => normalizeOptions(p, factoryOptions)) : [normalizeOptions(persist, factoryOptions)]).map(\n      ({\n        storage = localStorage,\n        beforeRestore = null,\n        afterRestore = null,\n        serializer = {\n          serialize: JSON.stringify,\n          deserialize: JSON.parse\n        },\n        key = store.$id,\n        paths = null,\n        debug = false\n      }) => {\n        var _a;\n        return {\n          storage,\n          beforeRestore,\n          afterRestore,\n          serializer,\n          key: ((_a = factoryOptions.key) != null ? _a : (k) => k)(key),\n          paths,\n          debug\n        };\n      }\n    );\n    store.$persist = () => {\n      persistences.forEach((persistence) => {\n        persistState(store.$state, persistence);\n      });\n    };\n    store.$hydrate = ({ runHooks = true } = {}) => {\n      persistences.forEach((persistence) => {\n        const { beforeRestore, afterRestore } = persistence;\n        if (runHooks)\n          beforeRestore == null ? void 0 : beforeRestore(context);\n        hydrateStore(store, persistence);\n        if (runHooks)\n          afterRestore == null ? void 0 : afterRestore(context);\n      });\n    };\n    persistences.forEach((persistence) => {\n      const { beforeRestore, afterRestore } = persistence;\n      beforeRestore == null ? void 0 : beforeRestore(context);\n      hydrateStore(store, persistence);\n      afterRestore == null ? void 0 : afterRestore(context);\n      store.$subscribe(\n        (_mutation, state) => {\n          persistState(state, persistence);\n        },\n        {\n          detached: true\n        }\n      );\n    });\n  };\n}\n\n// src/index.ts\nvar src_default = createPersistedState();\nexport {\n  createPersistedState,\n  src_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}