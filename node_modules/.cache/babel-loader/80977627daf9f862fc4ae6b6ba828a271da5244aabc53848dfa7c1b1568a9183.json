{"ast":null,"code":"'use strict';\n\nrequire(\"core-js/modules/es.array.push.js\");\n(function (m, p) {\n  \"object\" === typeof exports && \"undefined\" !== typeof module ? module.exports = p() : \"function\" === typeof define && define.amd ? define(p) : (m = m || self, m.AMapLoader = p());\n})(this, function () {\n  function m(a) {\n    var b = [];\n    a.AMapUI && b.push(p(a.AMapUI));\n    a.Loca && b.push(r(a.Loca));\n    return Promise.all(b);\n  }\n  function p(a) {\n    return new Promise(function (h, c) {\n      var f = [];\n      if (a.plugins) for (var e = 0; e < a.plugins.length; e += 1) -1 == d.AMapUI.plugins.indexOf(a.plugins[e]) && f.push(a.plugins[e]);\n      if (g.AMapUI === b.failed) c(\"\\u524d\\u6b21\\u8bf7\\u6c42 AMapUI \\u5931\\u8d25\");else if (g.AMapUI === b.notload) {\n        g.AMapUI = b.loading;\n        d.AMapUI.version = a.version || d.AMapUI.version;\n        e = d.AMapUI.version;\n        var l = document.body || document.head,\n          k = document.createElement(\"script\");\n        k.type = \"text/javascript\";\n        k.src = \"https://webapi.amap.com/ui/\" + e + \"/main.js\";\n        k.onerror = function (a) {\n          g.AMapUI = b.failed;\n          c(\"\\u8bf7\\u6c42 AMapUI \\u5931\\u8d25\");\n        };\n        k.onload = function () {\n          g.AMapUI = b.loaded;\n          if (f.length) window.AMapUI.loadUI(f, function () {\n            for (var a = 0, b = f.length; a < b; a++) {\n              var c = f[a].split(\"/\").slice(-1)[0];\n              window.AMapUI[c] = arguments[a];\n            }\n            for (h(); n.AMapUI.length;) n.AMapUI.splice(0, 1)[0]();\n          });else for (h(); n.AMapUI.length;) n.AMapUI.splice(0, 1)[0]();\n        };\n        l.appendChild(k);\n      } else g.AMapUI === b.loaded ? a.version && a.version !== d.AMapUI.version ? c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c AMapUI \\u6df7\\u7528\") : f.length ? window.AMapUI.loadUI(f, function () {\n        for (var a = 0, b = f.length; a < b; a++) {\n          var c = f[a].split(\"/\").slice(-1)[0];\n          window.AMapUI[c] = arguments[a];\n        }\n        h();\n      }) : h() : a.version && a.version !== d.AMapUI.version ? c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c AMapUI \\u6df7\\u7528\") : n.AMapUI.push(function (a) {\n        a ? c(a) : f.length ? window.AMapUI.loadUI(f, function () {\n          for (var a = 0, b = f.length; a < b; a++) {\n            var c = f[a].split(\"/\").slice(-1)[0];\n            window.AMapUI[c] = arguments[a];\n          }\n          h();\n        }) : h();\n      });\n    });\n  }\n  function r(a) {\n    return new Promise(function (h, c) {\n      if (g.Loca === b.failed) c(\"\\u524d\\u6b21\\u8bf7\\u6c42 Loca \\u5931\\u8d25\");else if (g.Loca === b.notload) {\n        g.Loca = b.loading;\n        d.Loca.version = a.version || d.Loca.version;\n        var f = d.Loca.version,\n          e = d.AMap.version.startsWith(\"2\"),\n          l = f.startsWith(\"2\");\n        if (e && !l || !e && l) c(\"JSAPI \\u4e0e Loca \\u7248\\u672c\\u4e0d\\u5bf9\\u5e94\\uff01\\uff01\");else {\n          e = d.key;\n          l = document.body || document.head;\n          var k = document.createElement(\"script\");\n          k.type = \"text/javascript\";\n          k.src = \"https://webapi.amap.com/loca?v=\" + f + \"&key=\" + e;\n          k.onerror = function (a) {\n            g.Loca = b.failed;\n            c(\"\\u8bf7\\u6c42 AMapUI \\u5931\\u8d25\");\n          };\n          k.onload = function () {\n            g.Loca = b.loaded;\n            for (h(); n.Loca.length;) n.Loca.splice(0, 1)[0]();\n          };\n          l.appendChild(k);\n        }\n      } else g.Loca === b.loaded ? a.version && a.version !== d.Loca.version ? c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c Loca \\u6df7\\u7528\") : h() : a.version && a.version !== d.Loca.version ? c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c Loca \\u6df7\\u7528\") : n.Loca.push(function (a) {\n        a ? c(a) : c();\n      });\n    });\n  }\n  if (!window) throw Error(\"AMap JSAPI can only be used in Browser.\");\n  var b;\n  (function (a) {\n    a.notload = \"notload\";\n    a.loading = \"loading\";\n    a.loaded = \"loaded\";\n    a.failed = \"failed\";\n  })(b || (b = {}));\n  var d = {\n      key: \"\",\n      AMap: {\n        version: \"1.4.15\",\n        plugins: []\n      },\n      AMapUI: {\n        version: \"1.1\",\n        plugins: []\n      },\n      Loca: {\n        version: \"1.3.2\"\n      }\n    },\n    g = {\n      AMap: b.notload,\n      AMapUI: b.notload,\n      Loca: b.notload\n    },\n    n = {\n      AMap: [],\n      AMapUI: [],\n      Loca: []\n    },\n    q = [],\n    t = function (a) {\n      \"function\" == typeof a && (g.AMap === b.loaded ? a(window.AMap) : q.push(a));\n    };\n  return {\n    load: function (a) {\n      return new Promise(function (h, c) {\n        if (g.AMap == b.failed) c(\"\");else if (g.AMap == b.notload) {\n          var f = a.key,\n            e = a.version,\n            l = a.plugins;\n          f ? (window.AMap && \"lbs.amap.com\" !== location.host && c(\"\\u7981\\u6b62\\u591a\\u79cdAPI\\u52a0\\u8f7d\\u65b9\\u5f0f\\u6df7\\u7528\"), d.key = f, d.AMap.version = e || d.AMap.version, d.AMap.plugins = l || d.AMap.plugins, g.AMap = b.loading, e = document.body || document.head, window.___onAPILoaded = function (d) {\n            delete window.___onAPILoaded;\n            if (d) g.AMap = b.failed, c(d);else for (g.AMap = b.loaded, m(a).then(function () {\n              h(window.AMap);\n            })[\"catch\"](c); q.length;) q.splice(0, 1)[0]();\n          }, l = document.createElement(\"script\"), l.type = \"text/javascript\", l.src = \"https://webapi.amap.com/maps?callback=___onAPILoaded&v=\" + d.AMap.version + \"&key=\" + f + \"&plugin=\" + d.AMap.plugins.join(\",\"), l.onerror = function (a) {\n            g.AMap = b.failed;\n            c(a);\n          }, e.appendChild(l)) : c(\"\\u8bf7\\u586b\\u5199key\");\n        } else if (g.AMap == b.loaded) {\n          if (a.key && a.key !== d.key) c(\"\\u591a\\u4e2a\\u4e0d\\u4e00\\u81f4\\u7684 key\");else if (a.version && a.version !== d.AMap.version) c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c JSAPI \\u6df7\\u7528\");else {\n            f = [];\n            if (a.plugins) for (e = 0; e < a.plugins.length; e += 1) -1 == d.AMap.plugins.indexOf(a.plugins[e]) && f.push(a.plugins[e]);\n            if (f.length) window.AMap.plugin(f, function () {\n              m(a).then(function () {\n                h(window.AMap);\n              })[\"catch\"](c);\n            });else m(a).then(function () {\n              h(window.AMap);\n            })[\"catch\"](c);\n          }\n        } else if (a.key && a.key !== d.key) c(\"\\u591a\\u4e2a\\u4e0d\\u4e00\\u81f4\\u7684 key\");else if (a.version && a.version !== d.AMap.version) c(\"\\u4e0d\\u5141\\u8bb8\\u591a\\u4e2a\\u7248\\u672c JSAPI \\u6df7\\u7528\");else {\n          var k = [];\n          if (a.plugins) for (e = 0; e < a.plugins.length; e += 1) -1 == d.AMap.plugins.indexOf(a.plugins[e]) && k.push(a.plugins[e]);\n          t(function () {\n            if (k.length) window.AMap.plugin(k, function () {\n              m(a).then(function () {\n                h(window.AMap);\n              })[\"catch\"](c);\n            });else m(a).then(function () {\n              h(window.AMap);\n            })[\"catch\"](c);\n          });\n        }\n      });\n    },\n    reset: function () {\n      delete window.AMap;\n      delete window.AMapUI;\n      delete window.Loca;\n      d = {\n        key: \"\",\n        AMap: {\n          version: \"1.4.15\",\n          plugins: []\n        },\n        AMapUI: {\n          version: \"1.1\",\n          plugins: []\n        },\n        Loca: {\n          version: \"1.3.2\"\n        }\n      };\n      g = {\n        AMap: b.notload,\n        AMapUI: b.notload,\n        Loca: b.notload\n      };\n      n = {\n        AMap: [],\n        AMapUI: [],\n        Loca: []\n      };\n    }\n  };\n});","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}