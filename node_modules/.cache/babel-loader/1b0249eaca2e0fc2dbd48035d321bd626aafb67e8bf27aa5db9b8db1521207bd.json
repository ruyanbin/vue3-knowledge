{"ast":null,"code":"import { SpotLight, Color } from 'three';\nclass ThreeLightSpot {\n  constructor(layer, options) {\n    this.layer = layer;\n    const light = new SpotLight(this.getColorHex(options.color), options.intensity, options.distance, options.angle, options.penumbra, options.decay);\n    this.object = light;\n    this.setPosition(options.position);\n    this.setTarget(options.target);\n    layer.add(light);\n  }\n  setColor(color) {\n    this.object.color = new Color(color);\n    this.refresh();\n  }\n  getColorHex(color) {\n    return new Color(color).getHex();\n  }\n  setIntensity(intensity) {\n    this.object.intensity = intensity;\n    this.refresh();\n  }\n  setPosition(position) {\n    var _a;\n    const positionConvert = (_a = this.layer) == null ? void 0 : _a.convertLngLat([position.x, position.y]);\n    this.object.position.set(positionConvert[0], positionConvert[1], position.z);\n    this.refresh();\n  }\n  setTarget(target) {\n    if (target) {\n      this.object.target = target;\n      this.refresh();\n    }\n  }\n  refresh() {\n    var _a;\n    (_a = this.layer) == null ? void 0 : _a.update();\n  }\n  remove() {\n    var _a;\n    if (this.object) {\n      (_a = this.layer) == null ? void 0 : _a.remove(this.object);\n    }\n  }\n  destroy() {\n    if (this.object) {\n      this.object = null;\n      this.layer = null;\n    }\n  }\n}\nexport { ThreeLightSpot as default };","map":{"version":3,"mappings":";AAeA,MAAqBA;EAInBC,YAAYC,OAAyBC,OAAkB;IACrD,KAAKD,KAAQ;IACb,MAAME,KAAQ,OAAIC,SAAU,MAAKC,YAAYH,OAAQ,SAAQA,OAAQ,YAAWA,QAAQI,QAAU,UAAQC,KAAO,UAAQC,UAAUN,OAAQ;IAC3I,KAAKO,MAAS;IACd,KAAKC,YAAYR,OAAQ;IACzB,KAAKS,UAAUT,OAAQ;IACvBD,MAAMW,GAAI;EAAA;EAGZC,SAASC,KAAe;IACjB,YAAQA,KAAQ,OAAIC,KAAM;IAC1B;EAAA;EAGPV,YAAYS,KAAc;IACjB,WAAIC,MAAMD,KAAO;EAAA;EAG1BE,aAAaC,SAAmB;IAC9B,KAAKR,OAAQQ,SAAY;IACpB;EAAA;EAGPP,YAAYQ,QAAc;IA1C5B;IA2CU,wBAAkB,WAAKjB,KAAL,wBAAYkB,cAAc,CAACD,SAASE,GAAGF,QAAS;IACxE,KAAKT,OAAQS,QAAS,KAAIG,gBAAgB,CAAI,mBAAgB,IAAIH,QAAS;IACtE;EAAA;EAGPP,UAAUW,MAAc;IACtB,IAAGA,MAAO;MACR,KAAKb,OAAQa,MAAS;MACjB;IAAA;EAAA;EAITC,OAAU;IAvDZ;IAwDI,WAAKtB,UAAL,IAAY;EAAA;EAGduB,MAAQ;IA3DV;IA4DI,IAAI,KAAKf,MAAQ;MACV,qBAAL,IAAY,sBAAO,IAAK;IAAA;EAAA;EAI5BgB,OAAU;IACR,IAAI,KAAKhB,MAAQ;MACf,KAAKA,MAAS;MACd,KAAKR,KAAQ;IAAA;EAAA;AAAA","names":["ThreeLightSpot","constructor","layer","options","light","SpotLight","getColorHex","distance","angle","penumbra","object","setPosition","setTarget","add","setColor","color","Color","setIntensity","intensity","position","convertLngLat","x","positionConvert","target","refresh","remove","destroy"],"sources":["../../../../../../src/packages/three/ThreeLightSpot/ThreeLightSpot.ts"],"sourcesContent":["import {SpotLight, Color} from 'three';\r\nimport type {Vec} from './Type';\r\nimport type CustomThreeLayer from '@vue-map/packages/three/ThreeLayer/CustomThreeLayer'\r\n\r\ninterface Options {\r\n  color: string // 颜色的rgb数值。缺省值为 0xffffff。\r\n  intensity: number  // 光照的强度。缺省值为 1。\r\n  distance: number // 这个距离表示从光源到光照强度为0的位置。 当设置为0时，光永远不会消失(距离无穷大)\r\n  angle: number // 光线散射角度，最大为Math.PI/2\r\n  penumbra: number // 聚光锥的半影衰减百分比。在0和1之间的值。默认为0\r\n  decay: number // 沿着光照距离的衰退量。缺省值 1\r\n  position: Vec // 点位置\r\n  target: any // 目标模型\r\n}\r\n\r\nclass ThreeLightSpot {\r\n  object: SpotLight | null // Light\r\n  layer: CustomThreeLayer | null // threejs的图层对象\r\n\r\n  constructor(layer: CustomThreeLayer, options: Options) {\r\n    this.layer = layer;\r\n    const light = new SpotLight(this.getColorHex(options.color), options.intensity, options.distance, options.angle, options.penumbra, options.decay);\r\n    this.object = light;\r\n    this.setPosition(options.position);\r\n    this.setTarget(options.target);\r\n    layer.add(light);\r\n  }\r\n\r\n  setColor(color: string) {\r\n    this.object!.color = new Color(color);\r\n    this.refresh();\r\n  }\r\n\r\n  getColorHex(color: string){\r\n    return new Color(color).getHex();\r\n  }\r\n\r\n  setIntensity(intensity: number) {\r\n    this.object!.intensity = intensity;\r\n    this.refresh();\r\n  }\r\n\r\n  setPosition(position: Vec){\r\n    const positionConvert = this.layer?.convertLngLat([position.x, position.y]);\r\n    this.object!.position.set(positionConvert[0], positionConvert[1], position.z);\r\n    this.refresh();\r\n  }\r\n\r\n  setTarget(target?: any) {\r\n    if(target){\r\n      this.object!.target = target;\r\n      this.refresh();\r\n    }\r\n  }\r\n\r\n  refresh() {\r\n    this.layer?.update();\r\n  }\r\n\r\n  remove(){\r\n    if (this.object) {\r\n      this.layer?.remove(this.object)\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    if (this.object) {\r\n      this.object = null;\r\n      this.layer = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ThreeLightSpot\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}